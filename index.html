<!DOCTYPE html>
<html lang="pt-br">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <style type="text/css">
        .graficos {
            width: 300px;
            height: 300px;
        }
    </style>
   <script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="chart.js"></script>
   <title>Testes Implantação</title>
</head>
<body>
    <div class = 'titulo'>
        <h1><center>Estatistica descritiva</center></h1>
    </div>  
    <div class = 'qualdiscre'>
        <h1>Qualitativa</h1>
        <p>Nome da variavel</p> 
        <input type="string" id="variavelqualitativa"  placeholder="Insira o nome da variavel">
        <select id = tipdadosqualitativa>
            <option value="AMOSTRA"  id = "Amostraqual">AMOSTRA</option>
            <option value="POPULAÇÃO"  id = "Amostraqual">POPULAÇÃO</option>
        </select>
        <p>Insira os Dados</p> 
        <input type="string" id="valor"  placeholder="Valores sepadados por ;">
        <select id = qualitativa>
            <option value="DISCRETA"  id = "discreta">ORDINAL</option>
            <option value="NOMINAL"  id = "nominal">NOMINAL</option>
        </select>
                <div>
                <p>Informe a Ordem</p>
                <input id = ordenar type = "string" placeholder="Separação por ;"></input>
                <button type="button" onclick="qualitativa()">Calcular</button>
                </div>
                <div>
                    <p></p>
                    <select id = medidaseparatizes onchange="medidaseparatiz()">
                        <option value="1" id = "separatriz">MEDIDAS SEPARATRIZES</option>
                        <option value="4"  id = "Q">QUARTIL</option>
                        <option value="5"  id = "K">QUINTIL</option>
                        <option value="10"  id = "D">DECIL</option>
                        <option value="100"  id = "P">PORCENTIL</option>
                    </select>
                    <input id = porcentagem type = "number" min = "1" max = "1"></input>
                    </div>
        <div >
            <table class="table" width="200px"  text-align: center table-layout: fixed margin-bottom : .5em id="variavelquali"><tr><strong><h1></h1></strong></tr></table>
            <table id="tablequalitativa" border="1" class="table" text-align: center table-layout: fixed margin-bottom : .5em>
            </table>
        </div>
        <div>
            <table class="table" id="tcqualitativa"></table>
            <table class="table" id="mdseparatriz"></table>   
        </div>
        
        
    </div>

    <div class = 'Quantitativa'>
        <h1>Quantitativa </h1>
        <p>Nome da variavel</p>
        <input type="string" id="variavelquantitativa"  placeholder="Insira o nome da variavel">
        <select id = tipdadosquantitativa>
            <option value="AMOSTRA"  id = "Amostraquant">AMOSTRA</option>
            <option value="POPULAÇÃO"  id = "Amostraquant">POPULAÇÃO</option>
        </select>
        <p>Insira os Dados</p> 
        <input type="string" id="valores"  placeholder="Valores sepadados por ;">
        <select id = quantitativa>
            <option value="DISCRETA"  id = "discretaquant">DISCRETA</option>
            <option value="NOMINAL" id = "nominalquant">CONTINUA</option>
        </select>        
        <select id = medidaseparatizesm onchange="medidaseparatiz()">
            <option value="1" id = "separatrizm">MEDIDAS SEPARATRIZES</option>
            <option value="4"  id = "Qm">QUARTIL</option>
            <option value="5"  id = "Km">QUINTIL</option>
            <option value="10"  id = "Dm">DECIL</option>
            <option value="100"  id = "Pm">PORCENTIL</option>
        </select>
        <input id = porcentagemm type = "number" min = "1" max = "1"></input>
        <button class="button" onclick="quantitativa()">Calcular</button>
        <div >
            <table id="variavelquant"><tr><strong><h1></h1></strong></tr></table>
            <table id="tablequantitativa" border="1">
            </table>
            <table class="table" id="tendenciacentral"></table>
            <table class="table" id="mdseparatrizm"></table>
        </div>
        <div>

        </div>
    </div>     
    <div class = 'titulo'>
        <h1><center>Probabilidade</center></h1>
    </div>

    <div class = 'normal'>
        <h1>Uniforme</h1>
        <p>Valor minimo:</P>
        <input id = 'valorMin' type = "string" placeholder="00"></input>
        
        <P>Valor maximo:</p>
        <input id = 'valorMax' type = "string" placeholder="00"></input>
       
        <P>Mais que</p>
        <input id = 'maisQ' type = "string" placeholder="00"></input>
        <button class="button" onclick="maisq()">Calcular</button>
        <table class="table" id="maisqdiv"></table>   

        <P>Menos que</p>
        <input id = 'menosQ' type = "string" placeholder="00"></input>
        <button class="button" onclick="menosq()">Calcular</button>
        <table class="table" id="menosqdiv"></table> 

        <P>Entre</p>
        <input id = 'entre1' type = "string" placeholder="00"></input>
        <P>e</p>
        <input id = 'entre2' type = "string" placeholder="00"></input>
        <button class="button" onclick="entre()">Calcular</button>
        <table class="table" id="entrediv"></table> 
        <p></p>
    </div>
    <div>
        <table class="table" id="mediaedesvio"></table>  
    </div>


    <div class = 'normal'>
        <h1>Normal</h1>
		<input type="number" id="quantidadeNormal" placeholder="Quantidade">
		<select id="tipos" onclick="selectNormal()">
			<option value="">Classes ? </option>
			<option value='0'>MAIS QUE</option>
			<option value="1">MENOR QUE</option>
			<option value="2">ENTRE </option>
		</select>
		<div id='selectTipos'>

		</div>
		<div id="resultadoProbabilidade"></div>
		<input type="number" name="" id="mediaNormal" placeholder="Media"><br>
		<input type="number" name="" id="desvioNormal" placeholder="Desvio Padrão"><br>
		<button onclick="probabilidadeNormal()">Calcular</button>
    </div>
    <div class = 'normal'>
        <h1>Binominal</h1>
        <p>Amostra</p>
        <input id = 'mostra' type = "number" placeholder="00"></input>
        <p>Sucesso</p>
        <input id = 'sucesso' type = "number" placeholder="Exemplo: 0.2"></input>
        <p>Fracasso</p>
        <input id = 'fracasso' type = "number" placeholder="Exemplo: 0.8"></input>
        <p>Evento</p>
        <input id = 'evento' type = "number" placeholder="00"></input>
        <button class="button" onclick="binominal()">Calcular</button>
    </div>
    <div>
        <table id = "probnomi"></table>
    </div>

    <div class = 'titulo'>
        <h1>CORRELAÇÃO E REGRESSÃO</h1>
		X <input type="text" id="correlacao_input" placeholder="Insira os numeros separados por ;">
		Y <input type="text" id="regressao_input" placeholder="Insira os numeros separados por ;">
		<button onclick="corelacao()">Calcular</button>
		<div id='corelacao_results'></div>
		Ponto Futuro
		X <input type="text" id="x_future" oninput='regressaoX()' placeholder="Insira os numeros separados por ;">
		Y <input type="text" id="y_future" oninput='regressaoY()' placeholder="Insira os numeros separados por ;"> <br>
		<div id="regressao_future"></div>
		<div class="graficos">
			<canvas id="myChartgraficoCorrelacao" width="20" height="20"></canvas>
		</div>
    </div>
        <div id="regressao_future"></div>
<div class="graficos">
    <canvas id="myChartgraficoCorrelacao" width="20" height="20"></canvas>
</div>
    <script src ="correlacao.js"></script>
    <script src ="normal.js"></script>
    <script src ="uniforme.js"></script>
    <script>
        function probabilidadeNormal(value) {

        let quantidade = document.getElementById("quantidadeNormal").value;
        let media = document.getElementById('mediaNormal').value;
        let desvio = document.getElementById('desvioNormal').value;
        var value = document.getElementById('tipos').value;

        let tabelaDistribuicao = [];
        tabelaDistribuicao[0] = [0.0000, 0.0040, 0.0080, 0.0120, 0.0160, 0.0199, 0.0239, 0.0279, 0.0319, 0.0359];
        tabelaDistribuicao[1] = [0.0398, 0.0438, 0.0478, 0.0517, 0.0557, 0.0596, 0.0636, 0.0675, 0.0714, 0.0753];
        tabelaDistribuicao[2] = [0.0793, 0.0832, 0.0871, 0.0910, 0.0948, 0.0987, 0.1026, 0.1064, 0.1103, 0.1141];
        tabelaDistribuicao[3] = [0.1179, 0.1217, 0.1255, 0.1293, 0.1331, 0.1368, 0.1406, 0.1443, 0.1480, 0.1517];
        tabelaDistribuicao[4] = [0.1554, 0.1591, 0.1628, 0.1664, 0.1700, 0.1736, 0.1772, 0.1808, 0.1844, 0.1879];
        tabelaDistribuicao[5] = [0.1915, 0.1950, 0.1985, 0.2019, 0.2054, 0.2088, 0.2123, 0.2157, 0.2190, 0.2224];
        tabelaDistribuicao[6] = [0.2257, 0.2291, 0.2324, 0.2357, 0.2389, 0.2422, 0.2454, 0.2486, 0.2517, 0.2549];
        tabelaDistribuicao[7] = [0.2580, 0.2611, 0.2642, 0.2673, 0.2704, 0.2734, 0.2764, 0.2794, 0.2823, 0.2852];
        tabelaDistribuicao[8] = [0.2881, 0.2910, 0.2939, 0.2967, 0.2995, 0.3023, 0.3051, 0.3078, 0.3106, 0.3133];
        tabelaDistribuicao[9] = [0.3159, 0.3186, 0.3212, 0.3238, 0.3264, 0.3289, 0.3315, 0.3340, 0.3365, 0.3389];
        tabelaDistribuicao[10] = [0.3413, 0.3438, 0.3461, 0.3485, 0.3508, 0.3531, 0.3554, 0.3577, 0.3599, 0.3621];
        tabelaDistribuicao[11] = [0.3643, 0.3665, 0.3686, 0.3708, 0.3729, 0.3749, 0.3770, 0.3790, 0.3810, 0.3830];
        tabelaDistribuicao[12] = [0.3849, 0.3869, 0.3888, 0.3907, 0.3925, 0.3944, 0.3962, 0.3980, 0.3997, 0.4015];
        tabelaDistribuicao[13] = [0.4032, 0.4049, 0.4066, 0.4082, 0.4099, 0.4115, 0.4131, 0.4147, 0.4162, 0.4177];
        tabelaDistribuicao[14] = [0.4192, 0.4207, 0.4222, 0.4236, 0.4251, 0.4265, 0.4279, 0.4292, 0.4306, 0.4319];
        tabelaDistribuicao[15] = [0.4332, 0.4345, 0.4357, 0.4370, 0.4382, 0.4394, 0.4406, 0.4418, 0.4429, 0.4441];
        tabelaDistribuicao[16] = [0.4452, 0.4463, 0.4474, 0.4484, 0.4495, 0.4505, 0.4515, 0.4525, 0.4535, 0.4545];
        tabelaDistribuicao[17] = [0.4554, 0.4564, 0.4573, 0.4582, 0.4591, 0.4599, 0.4608, 0.4616, 0.4625, 0.4633];
        tabelaDistribuicao[18] = [0.4641, 0.4649, 0.4656, 0.4664, 0.4671, 0.4678, 0.4686, 0.4693, 0.4699, 0.4706];
        tabelaDistribuicao[19] = [0.4713, 0.4719, 0.4726, 0.4732, 0.4738, 0.4744, 0.4750, 0.4756, 0.4761, 0.4767];
        tabelaDistribuicao[20] = [0.4772, 0.4778, 0.4783, 0.4788, 0.4793, 0.4798, 0.4803, 0.4808, 0.4812, 0.4817];
        tabelaDistribuicao[21] = [0.4821, 0.4826, 0.4830, 0.4834, 0.4838, 0.4842, 0.4846, 0.4850, 0.4854, 0.4857];
        tabelaDistribuicao[22] = [0.4861, 0.4864, 0.4868, 0.4871, 0.4875, 0.4878, 0.4881, 0.4884, 0.4887, 0.4890];
        tabelaDistribuicao[23] = [0.4893, 0.4896, 0.4898, 0.4901, 0.4904, 0.4906, 0.4909, 0.4911, 0.4913, 0.4916];
        tabelaDistribuicao[24] = [0.4918, 0.4920, 0.4922, 0.4925, 0.4927, 0.4929, 0.4931, 0.4932, 0.4934, 0.4936];
        tabelaDistribuicao[25] = [0.4938, 0.4940, 0.4941, 0.4943, 0.4945, 0.4946, 0.4948, 0.4949, 0.4951, 0.4952];
        tabelaDistribuicao[26] = [0.4953, 0.4955, 0.4956, 0.4957, 0.4959, 0.4960, 0.4961, 0.4962, 0.4963, 0.4964];
        tabelaDistribuicao[27] = [0.4965, 0.4966, 0.4967, 0.4968, 0.4969, 0.4970, 0.4971, 0.4972, 0.4973, 0.4974];
        tabelaDistribuicao[28] = [0.4974, 0.4975, 0.4976, 0.4977, 0.4977, 0.4978, 0.4979, 0.4979, 0.4980, 0.4981];
        tabelaDistribuicao[29] = [0.4981, 0.4982, 0.4982, 0.4983, 0.4984, 0.4984, 0.4985, 0.4985, 0.4986, 0.4986];
        tabelaDistribuicao[30] = [0.4987, 0.4987, 0.4987, 0.4988, 0.4988, 0.4989, 0.4989, 0.4989, 0.4990, 0.4990];
        tabelaDistribuicao[31] = [0.4990, 0.4991, 0.4991, 0.4991, 0.4992, 0.4992, 0.4992, 0.4992, 0.4993, 0.4993];
        tabelaDistribuicao[32] = [0.4993, 0.4993, 0.4994, 0.4994, 0.4994, 0.4994, 0.4994, 0.4995, 0.4995, 0.4995];
        tabelaDistribuicao[33] = [0.4995, 0.4995, 0.4995, 0.4996, 0.4996, 0.4996, 0.4996, 0.4996, 0.4996, 0.4997];
        tabelaDistribuicao[34] = [0.4997, 0.4997, 0.4997, 0.4997, 0.4997, 0.4997, 0.4997, 0.4997, 0.4997, 0.4998];
        tabelaDistribuicao[35] = [0.4998, 0.4998, 0.4998, 0.4998, 0.4998, 0.4998, 0.4998, 0.4998, 0.4998, 0.4998];
        tabelaDistribuicao[36] = [0.4998, 0.4998, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999];
        tabelaDistribuicao[37] = [0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999];
        tabelaDistribuicao[38] = [0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999, 0.4999];
        tabelaDistribuicao[39] = [0.5000, 0.5000, 0.5000, 0.5000, 0.5000, 0.5000, 0.5000, 0.5000, 0.5000, 0.5000];

        if (value == 0 || value == 1) {
            let scoreZ = ((quantidade - media) / desvio).toFixed(2)
            let x = Math.floor(scoreZ * 10)
            let corretor = scoreZ * 10
            if (scoreZ < 0) scoreZ *= -1
            if (x > corretor) x--
            console.log(x)
            if (x > 39) { var prob = 0.5 }
            else {
                for (let i = 0; i <= tabelaDistribuicao[x].length; i++) {
                    let y = (scoreZ * 100) - (x * 10)
                    if (i == y) {
                        var prob = tabelaDistribuicao[x][i]
                        prob = ((0.5 - prob) * 100).toFixed(2)
                        console.log(prob)
                        alert('Probabilidade: ' + prob + '%')
                    }
                }
            }
        } else {
            let de = document.getElementById('deNormal').value;
            let ate = document.getElementById('ateNormal').value;

            let scoreZ1 = ((de - media) / desvio).toFixed(2)
            let scoreZ2 = ((ate - media) / desvio).toFixed(2)

            if (scoreZ1 < 0) scoreZ1 *= -1
            if (scoreZ2 < 0) scoreZ2 *= -1

            let x1 = Math.floor(scoreZ1 * 10)
            let corretor2 = scoreZ2 * 10
            let corretor1 = scoreZ1 * 10
            if (x1 > corretor1) { x1 = x1 - 1 }
            let x2 = Math.floor(scoreZ2 * 10)
            if (x2 > corretor2) { x2 = x2 - 1 }

            for (let i = 0; i <= tabelaDistribuicao[x1].length; i++) {
                let y = (scoreZ1 * 100) - (x1 * 10)
                if (i == y) {
                    var prob1 = tabelaDistribuicao[x1][i]
                    console.log(prob1)
                }
            }
            for (let i = 0; i <= tabelaDistribuicao[x2].length; i++) {
                let y = (scoreZ2 * 100) - (x2 * 10)
                if (i == y) {
                    var prob2 = tabelaDistribuicao[x2][i]
                    console.log(prob2)
                }
            }
            let probabilidade = (prob2 - prob1)
            if (probabilidade < 0) probabilidade *= -1
            probabilidade *= 100
            alert(probabilidade)
        }
        }


        function calc_Probabilidade() {
        medidas.innerHTML = ' '
        probabilidadeBinomial()
        }

        // Correlação
        function corelacao(a) {
			corelacao_results.innerHTML = ''
			let cor = document.getElementById('correlacao_input').value;
			let reg = document.getElementById('regressao_input').value;
			let vetCorrelacao = cor.toString().split(';');
			let vetregressao = reg.toString().split(';');

			let x = 0; let xy = 0; let y = 0; let xx = 0; let yy = 0; var vetval = [];
			let n = vetCorrelacao.length
			for (let i = 0; i < vetCorrelacao.length; i++) {
				x += Number(vetCorrelacao[i])
				y += Number(vetregressao[i])
				xy += Number(vetregressao[i] * vetCorrelacao[i])
				xx += Number(Math.pow(vetCorrelacao[i], 2))
				yy += Number(Math.pow(vetregressao[i], 2))
			}
			//-----------CORRELACAO--------------------------------------------------//
			let calcdividendo = (n * xy) - (x * y)
			let calcdivisor = (Math.sqrt((n * xx - (x * x))).toFixed(2) * Math.sqrt((n * yy - y * y)).toFixed(2)).toFixed(2)
			let r = parseFloat(((calcdividendo / calcdivisor) * 100)).toFixed(2)


			//----------REGRESSAO-----------------------------------------------------//
			var a = ((n * xy - x * y) / (n * xx - x * x))
			vetval.push(a)
			let regy = y / n
			let regx = x / n
			var b = (regy - a * regx)
			vetval.push(b)

			// r = parseFloat(r)
			a = parseFloat(a.toFixed(2))
			b = parseFloat(b.toFixed(2))

			// regressao_future.innerHTML=' '		
			corelacao_results.innerHTML += `Correlação: ${r} %  | y = ${a.toFixed(2)}X + ${b.toFixed(2)}`


			graficocorelaco(cor,reg,a,b)
			return vetval

		}

		function regressaoX(vetval) {
			let vet = corelacao(vetval)
			console.log(vet)
			let a = (vet[0]).toFixed(4); let b = (vet[1]).toFixed(4)
			// graficocorelaco()
			var x_future = document.getElementById('x_future').value;
			 var y_future = document.getElementById('y_future').value;
			console.log(a, x_future, b, y_future)

			let future_y = (Number(a) * Number(x_future) + Number(b)).toFixed(2)
			console.log(future_y)

			document.getElementById('y_future').value = future_y;

		}
		function regressaoY(vetval) {
			let vet = corelacao(vetval)
			console.log(vet)
			let a = (vet[0]).toFixed(4); let b = (vet[1]).toFixed(4)
			// graficocorelaco()
			var x_future = document.getElementById('x_future').value;
			var y_future = document.getElementById('y_future').value;
			console.log(a, y_future, b)

			let future_x = ((Number(y_future) - Number(b)) / Number(a)).toFixed(2)
			console.log(future_x)

			document.getElementById('x_future').value = future_x;

		}

		function graficocorelaco(cor,reg,a=null,b=null) {

			var valX = cor.split(';')
			var valY = reg.split(';')


		    var ctx = document.getElementById("myChartgraficoCorrelacao").getContext('2d');

		    var dados = [];

		    //Monta os pontos no grafico//
		    for(var i=0; i<cor.length; i++){
		        var dd = {
		             x: valY[i],
            		y: valX[i]
		        }
		        dados.push(dd)
		    }
		    

		    var reta = [{x:Math.min(...valY),y:(Math.min(...valY)-b)/a}, {x:Math.max(...valY),y:(Math.max(...valY)-b)/a}];
		    

		    var chart = new Chart(ctx, {
		        type: 'line',
		        data: {
		          datasets: [{
		            type: 'line',
		            label: 'Projeção:',
		            data: reta,
		            fill: false,
		            backgroundColor: "rgba(46,158,79, .7)",
		            borderColor: "rgba(46,158,79, .7)",
		            pointRadius: 0
		          }, {
		            type: 'bubble',
		            label: 'Dados:',
		            data: dados,
		            backgroundColor: "rgba(76,78,80, .7)",
		            borderColor: "transparent",
		          }]
		        },
		        options: {
		          scales: {
		            xAxes: [{
		              type: 'linear',
		              position: 'bottom'
		            }],
		           
		          }
		        }
		      });   
		}

    </script>
</body>
</html>
